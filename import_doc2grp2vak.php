<?php
die();
error_reporting(E_ALL);

include("import_database.php");

// First get all people
$result = mysql_query("SELECT * FROM ppl") or die(mysql_error());

$ppl = array();
while ($row = mysql_fetch_object($result)) {
	$ppl[$row->login] = $row->ppl_id;
}

// Get all groups
$result = mysql_query("SELECT * FROM grp") or die(mysql_error());

$grp = array();
while ($row = mysql_fetch_object($result)) {
        $grp[$row->naam] = $row->grp_id;
}

// Get all vakken
$result = mysql_query("SELECT * FROM vak") or die(mysql_error());

$vakken = array();
while ($row = mysql_fetch_object($result)) {
        $vakken[$row->afkorting] = $row->vak_id;
}

$list = "A3e;ak;ber
A3e;bi;ste
A3e;du;ora
A3e;ec;lef
A3e;en;geo
A3e;fa;bar
A3e;gs;joe
A3e;ha;med
A3e;lo;vri
A3e;ma;ang
A3e;men;joe
A3e;ne;fro
A3e;ns;mew
A3e;te;med
A3e;wi;lau
A3f;ak;fra
A3f;bi;ste
A3f;du;dur
A3f;ec;vol
A3f;en;mey
A3f;fa;bar
A3f;gs;joe
A3f;ha;dri
A3f;lo;byv,rsn
A3f;ma;ang
A3f;men;dri
A3f;ne;sta
A3f;ns;jac
A3f;te;hek
A3f;wi;stt
B1a;ak;fra
B1a;bi;bss
B1a;bv;
B1a;en;scs
B1a;fa;koo
B1a;gs;rut
B1a;in;din
B1a;lo;str
B1a;men;scs
B1a;mu;
B1a;ne;lid
B1a;ns;ven
B1a;wi;bem
B1b;ak;hun
B1b;bi;bss
B1b;bv;
B1b;en;bro
B1b;fa;rey
B1b;gs;rut
B1b;in;dyk
B1b;lo;rsn
B1b;men;rey
B1b;mu;
B1b;ne;sta
B1b;ns;bor
B1b;wi;bem
B1c;ak;hun
B1c;bi;bss
B1c;bv;
B1c;en;gor
B1c;fa;pee
B1c;gs;rut
B1c;in;dyk
B1c;lo;stu
B1c;men;stu
B1c;mu;
B1c;ne;mie
B1c;ns;bor
B1c;wi;vik
B1d;ak;hun
B1d;bi;ste
B1d;bv;
B1d;en;vee
B1d;fa;pee
B1d;gs;rut
B1d;in;dyk
B1d;lo;byv
B1d;men;pee
B1d;mu;
B1d;ne;lid
B1d;ns;bor
B1d;wi;vik
B2a;ak;fra
B2a;bi;din
B2a;bv;
B2a;du;ora
B2a;en;bro
B2a;fa;pee
B2a;gs;kar
B2a;lo;byv,stu
B2a;men;bro
B2a;mu;sin
B2a;ne;bue
B2a;ns;jac
B2a;wi;bem
B2b;ak;kar
B2b;bi;din,ste
B2b;bv;
B2b;du;dur
B2b;en;vee
B2b;fa;rey
B2b;gs;kar
B2b;lo;byv,stu
B2b;men;dur,hea
B2b;mu;
B2b;ne;hea
B2b;ns;jac
B2b;wi;vik
B2c;ak;fra
B2c;bi;din
B2c;bv;
B2c;du;ora
B2c;en;geo
B2c;fa;koo
B2c;gs;kar
B2c;lo;rsn,vri
B2c;men;geo
B2c;mu;jog
B2c;ne;sta
B2c;ns;ven
B2c;wi;vik
B2d;ak;kar
B2d;bi;din,ste
B2d;bv;
B2d;du;ora
B2d;en;gor
B2d;fa;bar
B2d;gs;kar
B2d;lo;rsn,vri
B2d;men;kar
B2d;mu;
B2d;ne;ang
B2d;ns;ven
B2d;wi;vea
B2e;ak;fra
B2e;bi;ste,din
B2e;bv;
B2e;du;dur
B2e;en;gor
B2e;fa;bar
B2e;gs;kar
B2e;lo;byv,str
B2e;men;stt
B2e;mu;
B2e;ne;fyn
B2e;ns;nyh
B2e;wi;stt
E3a;ak;fra
E3a;bi;ste
E3a;du;ora
E3a;ec;vol
E3a;en;gor
E3a;fa;pro
E3a;gs;jan
E3a;ha;
E3a;lo;byv,vri
E3a;ma;
E3a;men;fra
E3a;ne;vin
E3a;ns;nyh
E3a;te;vag
E3a;wi;stt
G2g;ak;fra
G2g;bi;bss,din
G2g;bv;
G2g;du;dur
G2g;en;olt
G2g;fa;pro
G2g;gs;dee,kar
G2g;lo;byv,str
G2g;men;sta
G2g;mu;jog
G2g;ne;sta
G2g;ns;mew
G2g;wi;stt
G2h;ak;fra
G2h;bi;din
G2h;bv;
G2h;du;hei
G2h;en;gor
G2h;fa;bar
G2h;gs;hab,jan
G2h;lo;hen,stu
G2h;men;gor
G2h;mu;sin
G2h;ne;lid
G2h;ns;men
G2h;wi;lau
G3d;ak;ber
G3d;bi;bra
G3d;du;ora
G3d;ec;mee
G3d;en;scs
G3d;fa;pro
G3d;gs;joe
G3d;ha;
G3d;lo;byv,vri
G3d;ma;ang
G3d;men;pro
G3d;ne;bue
G3d;ns;ven
G3d;te;
G3d;wi;lau
G3e;ak;ber
G3e;bi;ste
G3e;du;ora
G3e;ec;lef
G3e;en;geo
G3e;fa;bar
G3e;gs;joe
G3e;ha;
G3e;lo;vri
G3e;ma;ang
G3e;men;joe
G3e;ne;fro
G3e;ns;mew
G3e;te;
G3e;wi;lau
H3a;ak;fra
H3a;bi;ste
H3a;du;ora
H3a;ec;vol
H3a;en;gor
H3a;fa;pro
H3a;gs;jan
H3a;ha;
H3a;lo;byv,vri
H3a;ma;
H3a;men;fra
H3a;ne;vin
H3a;ns;nyh
H3a;te;vag
H3a;wi;stt
H3b;ak;fra
H3b;bi;ste
H3b;du;pop
H3b;ec;vol
H3b;en;scs
H3b;fa;koo
H3b;gs;joe
H3b;ha;
H3b;lo;rsn,stu
H3b;ma;
H3b;men;pop
H3b;ne;sta
H3b;ns;mew
H3b;te;med
H3b;wi;hag
H3c;ak;fra
H3c;bi;bra
H3c;du;pop
H3c;ec;lef
H3c;en;gor
H3c;fa;bar
H3c;gs;joe
H3c;ha;vag
H3c;lo;rsn,stu
H3c;ma;
H3c;men;vag
H3c;ne;bee
H3c;ns;jac
H3c;te;vag
H3c;wi;stt
S1e;ak;ber
S1e;bi;brw
S1e;bv;
S1e;en;geo
S1e;fa;rey
S1e;gs;rut
S1e;in;dyk
S1e;lo;sme
S1e;men;sme
S1e;mu;
S1e;ne;vin
S1e;ns;bor
S1e;wi;gab
S2f;ak;kar
S2f;bi;bra,din
S2f;bv;
S2f;du;hei
S2f;en;mey
S2f;fa;pee
S2f;gs;kar
S2f;lo;vri
S2f;men;
S2f;mu;sin
S2f;ne;hea
S2f;ns;men
S2f;wi;stt
V1f;ak;ber
V1f;bi;bra
V1f;bv;
V1f;en;olt
V1f;fa;pro
V1f;gs;joe
V1f;in;dyk
V1f;lo;vri
V1f;men;plu
V1f;mu;sin
V1f;ne;fro
V1f;ns;
V1f;wi;gab
V1g;ak;hun
V1g;bi;bra
V1g;bv;
V1g;en;vee
V1g;fa;pro
V1g;gs;joe
V1g;in;dyk
V1g;lo;stu
V1g;men;vin
V1g;mu;sin
V1g;ne;vin
V1g;ns;
V1g;wi;lau
V1h;ak;ber
V1h;bi;ste
V1h;bv;
V1h;en;vee
V1h;fa;koo
V1h;gs;joe
V1h;in;din
V1h;lo;vri
V1h;men;men
V1h;mu;jog
V1h;ne;fyn
V1h;ns;
V1h;wi;lau
V2i;ak;fra
V2i;bi;din
V2i;bv;
V2i;du;pop
V2i;en;geo
V2i;fa;koo
V2i;gs;hab,jan
V2i;lo;hen,stu
V2i;men;lau
V2i;mu;sin
V2i;ne;sta
V2i;ns;mew
V2i;wi;lau
V3g;ak;fra
V3g;bi;wou
V3g;du;dur
V3g;ec;vol
V3g;en;mey
V3g;fa;bar
V3g;gs;joe
V3g;ha;
V3g;lo;byv,rsn
V3g;ma;ang
V3g;men;wou
V3g;ne;sta
V3g;ns;ven
V3g;te;hek
V3g;wi;vik
E3asp;sp;lon
G2ggr;gr;doo
G2gla;la;laa
G2hgr;gr;laa
G2hla;la;doo
G3dgr;gr;doo
G3dla;la;laa
G3egr;gr;laa
G3ela;la;doo
H3amu;mu;sce
H3bmu;mu;sce
H3cmu;mu;
H4.ak1;ak;hun
H4.ak2;ak;hun
H4.biol1;biol;bra
H4.bsm1;bsm;dir
H4.bsm2;bsm;rsn
H4.ckv1;ckv;vag
H4.ckv2;ckv;med
H4.ckv3;ckv;med
H4.dutl1;dutl;hei
H4.dutl2;dutl;hei
H4.econ1;econ;vol
H4.econ2;econ;mee
H4.fatl1;fatl;koo
H4.ges1;ges;kom
H4.ges2;ges;kom
H4.ges3;ges;kom,dee
H4.H4aentl;entl;gor
H4.H4amaat;maat;ang
H4.H4anetl;netl;hea
H4.H4bentl;entl;gor
H4.H4bmaat;maat;ang
H4.H4bnetl;netl;hea
H4.H4centl;entl;olt
H4.H4cmaat;maat;ang
H4.H4cnetl;netl;bee
H4.H4dentl;entl;mey
H4.H4dmaat;maat;ang
H4.H4dnetl;netl;fro
H4.in1;in;egg
H4.kubv1;kubv;med
H4.lom1;lo;str,byv
H4.lom2;lo;stu,vri
H4.lov1;lo;str,byv
H4.lov2;lo;stu,vri
H4.ml1;men;hei
H4.ml2;men;hun
H4.ml3;men;koo
H4.ml4;men;lon
H4.ml5;men;olt
H4.ml6;men;hag
H4.mo1;m&o;lef
H4.mo2;m&o;lef
H4.mu1;mu;sce
H4.nat1;nat;the
H4.schk1;schk;mew
H4.sptl1;sptl;lon
H4.wisA1;wisA;hag
H4.wisA2;wisA;hag
H4.wisB1;wisB;hag
H4.wisB2;wisB;nyh
H5.ak1;ak;hun
H5.biol1;biol;wou
H5.bsm1;bsm;vri
H5.dutl1;dutl;pop
H5.econ1;econ;mee
H5.fatl1;fatl;pee
H5.ges1;ges;kom
H5.H5aentl;entl;bro
H5.H5anetl;netl;bee
H5.H5bentl;entl;olt
H5.H5bnetl;netl;hea
H5.in1;in;egg
H5.kubv1;kubv;hek
H5.lo1;lo;byv
H5.lo2;lo;str
H5.maat1;maat;ang
H5.maat2;maat;ang
H5.ml1;men;lon
H5.ml2;men;olt
H5.ml3;men;str
H5.ml4;men;olk
H5.mo1;m&o;lef
H5.mu1;mu;sce
H5.nat1;nat;the
H5.schk1;schk;mew
H5.sptl1;sptl;lon
H5.wisA1;wisA;hag
H5.wisA2;wisA;hag
H5.wisB1;wisB;roy
V1fb+;b+;hun
V1fot;ot;laa
V1gb+;b+;bra
V1got;ot;doo
V1hb+;b+;men
V1hot;ot;doo
V2ib+;b+;hun,the
V3gb+;b+;oos
V4.ak1;ak;ber
V4.biol1;biol;brw
V4.bsm1;bsm;byv
V4.ckv1;ckv;hek
V4.ckv2;ckv;plu
V4.dutl1;dutl;pop
V4.dutl2;dutl;pop
V4.econ1;econ;vol
V4.econ2;econ;vol
V4.fatl1;fatl;rey
V4.ges1;ges;jan,hab
V4.ges2;ges;jan
V4.grtl1;grtl;laa
V4.in1;in;egg
V4.kcv1;kcv;laa
V4.kubv1;kubv;vag
V4.latl1;latl;doo
V4.lom1;lo;byv,vri
V4.lom2;lo;byv,stu
V4.lov1;lo;byv,vri
V4.lov2;lo;byv,stu
V4.ml1;men;doo
V4.ml2;men;laa
V4.ml3;men;mey
V4.ml4;men;the
V4.ml5;men;vea
V4.mo1;m&o;lef
V4.nat1;nat;the
V4.nlt1;nlt;lau,the,brw
V4.schk1;schk;bor
V4.schk2;schk;bor
V4.sptl1;sptl;ker
V4.sptl2;sptl;ker
V4.V4aanw;anw;brw,the
V4.V4aentl;entl;gor
V4.V4anetl;netl;bue
V4.V4banw;anw;the
V4.V4bentl;entl;mey
V4.V4bnetl;netl;mie,fyn
V4.V4canw;anw;the,bra
V4.V4centl;entl;scs
V4.V4cnetl;netl;fro
V4.wisA1;wisA;vea
V4.wisB1;wisB;lau
V4.wisB2;wisB;nyh
V4.wisC1;wisC;rui
V5.ak1;ak;ber
V5.ak2;ak;ber
V5.biol1;biol;oos
V5.biol2;biol;wou
V5.biol3;biol;wou
V5.bsmB;bsm;stu
V5.ckv1;ckv;med
V5.ckv2;ckv;hek
V5.dutl1;dutl;hei
V5.dutl2;dutl;hei
V5.econ1;econ;vol
V5.econ2;econ;vol
V5.fatl1;fatl;pro
V5.ges1;ges;jan
V5.ges2;ges;jan
V5.grtl1;grtl;doo
V5.in1;in;egg
V5.JCUbiol1;biol;
V5.JCUnat1;nat;
V5.JCUschk1;schk;
V5.JCUwisB1;wisB;
V5.JCUwisD1;wisD;
V5.kcv1;kcv;laa
V5.kcv2;kcv;laa
V5.kcv3;kcv;doo
V5.kubv1;kubv;vag
V5.latl1;latl;laa
V5.lom2;lo;hen,stu
V5.lom7;lo;byv,hen
V5.lov2;lo;hen,stu
V5.lov7;lo;byv,hen
V5.maat1;maat;ang
V5.maat2;maat;ang
V5.maat3;maat;ang
V5.maat4;maat;ang
V5.ml1;men;bue
V5.ml2;men;doo
V5.ml3;men;laa
V5.ml4;men;mey
V5.ml5;men;oos
V5.ml6;men;sin
V5.ml7;men;bor
V5.mo1;m&o;lef
V5.mo2;m&o;lef
V5.mu1;mu;sce
V5.nat1;nat;the
V5.nat2;nat;the
V5.nat3;nat;ven
V5.nlt1;nlt;the,wou
V5.schk1;schk;bor
V5.schk2;schk;bor
V5.sptl1;sptl;lon
V5.sptl2;sptl;lon
V5.V5aentl;entl;bro
V5.V5anetl;netl;mie
V5.V5bentl;entl;mey
V5.V5bnetl;netl;bue
V5.V5centl;entl;mey
V5.V5cnetl;netl;bue
V5.V5dentl;entl;olt
V5.V5dnetl;netl;fro
V5.wisA1;wisA;rui
V5.wisA2;wisA;nyh
V5.wisB1;wisB;vea
V5.wisB2;wisB;vea
V5.wisC1;wisC;rui
V5.wisD1;wisD;vea
V6.ak1;ak;hun
V6.ak2;ak;hun
V6.biol1;biol;brw
V6.biol2;biol;oos
V6.bsm1;bsm;str
V6.dutl1;dutl;pop
V6.dutl2;dutl;pop
V6.econ1;econ;vol
V6.econ2;econ;vol
V6.fatl1;fatl;koo
V6.fatl2;fatl;pee
V6.ges1;ges;kom
V6.ges2;ges;kom
V6.grtl1;grtl;laa
V6.kubv1;kubv;hek
V6.latl1;latl;doo
V6.lo1;lo;byv
V6.lo2;lo;vri
V6.lo3;lo;dir
V6.ml1;men;bor
V6.ml2;men;brw
V6.ml3;men;doo
V6.ml4;men;hek
V6.ml5;men;kom
V6.ml6;men;laa
V6.ml7;men;lon
V6.ml8;men;the
V6.ml9;men;vol
V6.mo1;m&o;lef
V6.mu1;mu;sce
V6.nat1;nat;the
V6.nat2;nat;nyh
V6.nlt1;nlt;the
V6.schk1;schk;bor
V6.schk2;schk;bor
V6.sptl1;sptl;lon
V6.sptl2;sptl;lon
V6.V6aentl;entl;bro
V6.V6anetl;netl;bue
V6.V6bentl;entl;mey
V6.V6bnetl;netl;bue
V6.V6centl;entl;olt
V6.V6cnetl;netl;mie
V6.wisA1;wisA;rui
V6.wisA2;wisA;vea
V6.wisB1;wisB;rui
V6.wisB2;wisB;vea
V6.wisC1;wisC;nyh
V6.wisD1;wisD;vea
A3e;;mie
A3f;;mie
B1a;;fro
B1b;;fro
B1c;;fro
B1d;;fro
B2a;;fro
B2b;;fro
B2c;;fro
B2d;;fro
B2e;;fro
E3a;;hag
G2g;;mie
G2h;;mie
G3d;;mie
G3e;;mie
H3a;;hag
H3b;;hag
H3c;;hag
H4a;;dir
H4b;;dir
H4c;;dir
H4d;;dir
H5a;;dir
H5b;;dir
S1e;;fro
S2f;;fro
V1f;;mie
V1g;;mie
V1h;;mie
V2i;;mie
V3g;;mie
V4a;;dir
V4b;;dir
V4c;;dir
V5a;;dir
V5b;;dir
V5c;;dir
V5d;;dir
V6a;;dir
V6b;;dir
V6c;;dir
A3e;;roy
A3f;;roy
B1a;;roy
B1b;;roy
B1c;;roy
B1d;;roy
B2a;;roy
B2b;;roy
B2c;;roy
B2d;;roy
B2e;;roy
E3a;;roy
G2g;;roy
G2h;;roy
G3d;;roy
G3e;;roy
H3a;;roy
H3b;;roy
H3c;;roy
H4a;;roy
H4b;;roy
H4c;;roy
H4d;;roy
H5a;;roy
H5b;;roy
S1e;;roy
S2f;;roy
V1f;;roy
V1g;;roy
V1h;;roy
V2i;;roy
V3g;;roy
V4a;;roy
V4b;;roy
V4c;;roy
V5a;;roy
V5b;;roy
V5c;;roy
V5d;;roy
V6a;;roy
V6b;;roy
V6c;;roy
A3e;;rie
A3f;;rie
B1a;;rie
B1b;;rie
B1c;;rie
B1d;;rie
B2a;;rie
B2b;;rie
B2c;;rie
B2d;;rie
B2e;;rie
E3a;;rie
G2g;;rie
G2h;;rie
G3d;;rie
G3e;;rie
H3a;;rie
H3b;;rie
H3c;;rie
H4a;;rie
H4b;;rie
H4c;;rie
H4d;;rie
H5a;;rie
H5b;;rie
S1e;;rie
S2f;;rie
V1f;;rie
V1g;;rie
V1h;;rie
V2i;;rie
V3g;;rie
V4a;;rie
V4b;;rie
V4c;;rie
V5a;;rie
V5b;;rie
V5c;;rie
V5d;;rie
V6a;;rie
V6b;;rie
V6c;;rie
A3e;;rec
A3f;;rec
B1a;;rec
B1b;;rec
B1c;;rec
B1d;;rec
B2a;;rec
B2b;;rec
B2c;;rec
B2d;;rec
B2e;;rec
E3a;;rec
G2g;;rec
G2h;;rec
G3d;;rec
G3e;;rec
H3a;;rec
H3b;;rec
H3c;;rec
H4a;;rec
H4b;;rec
H4c;;rec
H4d;;rec
H5a;;rec
H5b;;rec
S1e;;rec
S2f;;rec
V1f;;rec
V1g;;rec
V1h;;rec
V2i;;rec
V3g;;rec
V4a;;rec
V4b;;rec
V4c;;rec
V5a;;rec
V5b;;rec
V5c;;rec
V5d;;rec
V6a;;rec
V6b;;rec
V6c;;rec";
 $list = explode("\n", $list);
        foreach ($list as $value) {
                list($group, $vak, $docent) = explode(';', $value);
                $group = trim($group);
		$vak = trim($vak);
		$docent = trim($docent);

		$docs = explode(",", $docent);
		foreach ($docs as $doc) {
echo $group.":".$grp[$group].";".$vak.":".$vakken[$vak].";".$doc."<br>";

			$vak_id = $vakken[$vak];
                        if ($vak_id==0) {$vak_id="NULL";}


			$result = mysql_query("SELECT grp2vak_id FROM grp2vak WHERE grp_id=".$grp[$group]." AND vak_id= ".$vak_id);
			if(mysql_num_rows($result) == 1) {
				$row = mysql_fetch_row($result);
				$grp2vak_id = $row[0];
echo "grp2vak_id:".$grp2vak_id."<br>";
			} else {
				$result = mysql_query("INSERT INTO grp2vak (grp_id, vak_id) VALUES (".$grp[$group].", ".$vak_id.")");
				$grp2vak_id = mysql_insert_id();
echo "grp2vak_id:".$grp2vak_id." (insert)<br>";
			}

			$result = mysql_query("SELECT * FROM doc2grp2vak WHERE ppl_id=".$ppl[$doc]." AND grp2vak_id=".$grp2vak_id);
			if (mysql_num_rows($result) == 0) {
				$query = "INSERT INTO doc2grp2vak (ppl_id, grp2vak_id) VALUES (".$ppl[$doc].", ".$grp2vak_id.")";
		                mysql_query($query);
        		        echo $query.'<br>';
				echo mysql_error();
			}
		}
        }



